import { Message } from '../base/message';

export const generateBriefPrompt = (messages: Message[]) => {
  return `
你将收到一系列迄今为止你与用户之间交换的消息。
你的任务是将这些消息转化为一个更详细、更具体的研究问题，用于指导研究工作。

迄今为止你与用户之间交换的消息如下：
<消息>
${messages.map((message) => `${message.role}: ${message.content}`).join('\n')}
</消息>

今天的日期是${new Date().toLocaleDateString()}。

你需要返回一个用于指导研究的单一研究问题。

指导原则：
1. 最大化特异性和细节
- 包含所有已知的用户偏好，并明确列出需要考虑的关键属性或维度。
- 重要的是，要将用户提供的所有细节都包含在指令中。

2. 将未明确说明但必要的维度设为开放式
- 如果某些属性对有意义的输出至关重要，但用户未提供相关信息，需明确说明这些属性为开放式，或默认不设特定限制。

3. 避免无根据的假设
- 如果用户未提供某一细节，不要自行编造。
- 相反，应说明该细节未被明确规定，并引导研究者将其视为灵活可变的，或接受所有可能的选项。

4. 使用第一人称
- 从用户的角度来表述请求。

5. 来源
- 如果某些特定来源应被优先考虑，需在研究问题中明确指出。
- 对于产品和旅行研究，优先链接到官方或主要网站（例如，官方品牌网站、制造商页面，或像亚马逊这样有信誉的电子商务平台以获取用户评论），而非聚合网站或偏重SEO的博客。
- 对于学术或科学问题，优先链接到原始论文或官方期刊出版物，而非综述论文或二手摘要。
- 对于人物相关查询，尽量链接到他们的LinkedIn个人资料，或他们的个人网站（如果有的话）。
- 如果查询使用特定语言，优先考虑以该语言发布的来源。
  `;
};
